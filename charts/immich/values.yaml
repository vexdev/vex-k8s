immich:
  image:
    tag: v1.123.0
  immich:
    persistence:
      library:
        existingClaim: photo-volume-claim
  redis:
    enabled: true
    master:
      nodeSelector:
        kubernetes.io/hostname: k8s-node-vex
    replica:
      nodeSelector:
        kubernetes.io/hostname: k8s-node-vex
  machine-learning:
    enabled: true
    nodeSelector:
      kubernetes.io/hostname: k8s-node-vex
  server:
    env:
      IMMICH_LOG_LEVEL: verbose
    nodeSelector:
      kubernetes.io/hostname: k8s-node-vex
postgresql:
  image:
    repository: tensorchord/pgvecto-rs
    tag: pg16-v0.2.0
  global:
    postgresql:
      auth:
        username: immich
        database: immich
        password: immich
  primary:
    resources:
      requests:
        memory: 1Gi
        cpu: 500m
    nodeSelector:
      kubernetes.io/hostname: k8s-node-vex
    containerSecurityContext:
      readOnlyRootFilesystem: false
    initdb:
      scripts:
        create-extensions.sql: |
          CREATE EXTENSION cube;
          CREATE EXTENSION earthdistance;
          CREATE EXTENSION vectors;
  readReplicas:
    nodeSelector:
      kubernetes.io/hostname: k8s-node-vex
  backup:
    cronjob:
      nodeSelector:
        kubernetes.io/hostname: k8s-node-vex
